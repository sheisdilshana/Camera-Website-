<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Camera Product â€“ Perceptual Animation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== RESET ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* ===== BODY ===== */
body {
  height: 400vh;
  background: radial-gradient(circle at top, #111, #000);
  color: #fff;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ===== HERO TEXT ===== */
.hero {
  position: sticky;
  top: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  pointer-events: none;
}

.hero h1 {
  font-size: clamp(2rem, 5vw, 4rem);
  letter-spacing: 2px;
  margin-bottom: 10px;
}

.hero p {
  opacity: 0.7;
  font-size: 1.1rem;
}

/* ===== CAMERA VIEWER ===== */
.viewer {
  position: sticky;
  top: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
}

.viewer img {
  width: 60vw;
  max-width: 720px;
  height: auto;

  will-change: transform, opacity;
  transition: opacity 0.12s ease-out;

  filter: contrast(1.03) saturate(1.05);
}

/* ===== SECTION ===== */
.section {
  height: 100vh;
}
</style>
</head>

<body>

<section class="hero">
  <h1>PRO CAMERA</h1>
  <p>Scroll to experience the click</p>
</section>

<section class="viewer">
  <img id="camera" src="assets/images/img1.webp" alt="Camera">
</section>

<section class="section"></section>

<script>
/* ===== FRAME DATA ===== */
const frames = [
  "assets/images/img1.webp",
  "assets/images/img2.webp",
  "assets/images/img3.webp",
  "assets/images/img4.webp",
  "assets/images/img5.webp"
];

const img = document.getElementById("camera");
const totalFrames = frames.length;

/* ===== PRELOAD & DECODE ===== */
const cache = frames.map(src => {
  const i = new Image();
  i.src = src;
  i.decode().catch(() => {});
  return i;
});

/* ===== SMOOTH SCROLL ENGINE ===== */
let targetFrame = 0;
let currentFrame = 0;
const ease = 0.08; // lower = smoother

function animate() {
  currentFrame += (targetFrame - currentFrame) * ease;
  const index = Math.round(currentFrame);

  if (cache[index] && img.src !== cache[index].src) {
    img.src = cache[index].src;
  }

  requestAnimationFrame(animate);
}

/* ===== SCROLL LISTENER ===== */
window.addEventListener("scroll", () => {
  const scrollTop = window.scrollY;
  const maxScroll = document.body.scrollHeight - window.innerHeight;
  const progress = scrollTop / maxScroll;

  targetFrame = Math.min(
    totalFrames - 1,
    progress * (totalFrames - 1)
  );
});

/* ===== START LOOP ===== */
animate();
</script>

</body>
</html>
